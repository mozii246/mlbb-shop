<!DOCTYPE html>
<html lang="my">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MLBB Shop</title>
  <style>
    :root {
      --pink: #ff69b4;
      --blue: #00bfff;
      --light-bg: #fdfdfd;
      --card-bg: #fff;
      --text-color: #333;
      --border-color: #eee;
      --shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light-bg);
      color: var(--text-color);
      margin: 0;
      padding: 0;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background: linear-gradient(90deg, var(--pink), var(--blue));
      color: white;
      box-shadow: var(--shadow);
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    header button {
      margin-left: 0.5rem;
      padding: 0.5rem 1rem;
      border: none;
      background-color: white;
      color: var(--pink);
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    header button:hover {
      background-color: var(--blue);
      color: white;
    }

    section {
      padding: 1rem;
      max-width: 600px;
      margin: 1rem auto;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--shadow);
    }

    h2 {
      color: var(--pink);
      border-bottom: 2px solid var(--blue);
      padding-bottom: 0.5rem;
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
      color: var(--blue);
    }

    input, select {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.25rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      box-sizing: border-box;
      transition: border 0.3s;
    }

    input:focus, select:focus {
      border-color: var(--pink);
      outline: none;
    }

    button[type="submit"] {
      margin-top: 1.5rem;
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      cursor: pointer;
      background: linear-gradient(90deg, var(--pink), var(--blue));
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      transition: 0.3s;
      width: 100%;
    }

    button[type="submit"]:hover {
      opacity: 0.9;
    }

    .copy-box {
      border: 1px dashed var(--pink);
      padding: 0.75rem;
      margin-top: 0.25rem;
      background-color: #fff0f8;
      cursor: pointer;
      border-radius: 8px;
      user-select: none;
      transition: background-color 0.2s;
    }

    .copy-box:hover {
      background-color: #ffe0ef;
    }

    .history-item {
      border-bottom: 1px solid var(--border-color);
      padding: 0.75rem 0;
    }

    footer {
      margin-top: 2rem;
      padding: 1rem;
      background: linear-gradient(90deg, var(--blue), var(--pink));
      color: white;
      text-align: center;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    footer a {
      color: white;
      text-decoration: underline;
    }

    .error {
      color: red;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <h1>MLBB Shop</h1>
    <nav>
      <button id="checkoutTab">á€á€šá€ºá€›á€”á€º</button>
      <button id="historyTab">á€™á€¾á€á€ºá€á€™á€ºá€¸</button>
    </nav>
  </header>

  <!-- Checkout Section -->
  <section id="checkoutSection">
    <h2>á€ˆá€±á€¸á€á€šá€ºá€™á€Šá€º</h2>
    <label for="product">á€á€šá€ºá€›á€”á€ºá€›á€½á€±á€¸á€á€»á€šá€ºá€•á€«</label>
    <select id="product" name="product" required>
      <option value="">á€á€šá€ºá€™á€Šá€·á€ºá€•á€™á€¬á€</option>
      <option value="Weekly Pass" data-price="6000">Weekly Pass - 6000 Ks</option>
      
      
          <!-- á€ˆá€±á€¸á€”á€¾á€¯á€”á€ºá€¸á€‘á€•á€ºá€‘á€Šá€·á€ºá€›á€™á€šá€º -->
      
      
      <option value="Diamond Pack 2" data-price="10000">Diamond Pack 2 - 10000 Ks</option>
      <option value="Diamond Pack 3" data-price="15000">Diamond Pack 3 - 15000 Ks</option>
       <option value="Diamond Pack 1" data-price="5000">Diamond Pack 1 - 5000 Ks</option>
      
      
      <!-- á€ˆá€±á€¸á€”á€¾á€¯á€”á€ºá€¸á€‘á€•á€ºá€‘á€Šá€·á€ºá€›á€™á€šá€º -->
      
      
      
    </select>

    <label for="price">á€ˆá€±á€¸á€”á€¾á€¯á€”á€ºá€¸</label>
    <input type="text" id="price" name="price" readonly />

    <!-- Checkout Form -->
    <form id="checkoutForm" novalidate>
      <label for="gameName">Game Name</label>
      <input type="text" id="gameName" name="gameName" required />

      <label for="gameId">Game ID</label>
      <input type="number" id="gameId" name="gameId" required pattern="\d+" title="Game ID must be numeric" />

      <label for="gameServer">Game Server</label>
      <input type="number" id="gameServer" name="gameServer" required />

      <label for="telegramUsername">Telegram Username</label>
      <input type="text" id="telegramUsername" name="telegramUsername" required pattern="^@[a-zA-Z0-9_]{5,}$" title="Telegram username must start with @ and be at least 6 characters" />

      <label for="paymentMethod">Payment Method</label>
      <select id="paymentMethod" name="paymentMethod" required>
        <option value="">-- Please choose --</option>
        <option value="KBZ">KBZ Pay</option>
        <option value="WavePay">Wave Pay</option>
        <option value="CBPay">CB Pay</option>
      </select>

      <!-- Account Info Display -->
      <div id="accountInfo" style="display:none; margin-top: 1rem;">
        <label>Account Name</label>
        <div class="copy-box" id="accountName">Your Shop Account</div>

        <label>Phone Number <small>(click to copy)</small></label>
        <div class="copy-box" id="phoneNumber">09XXXXXXXXX</div>
      </div>

      <label for="transferCode">á€„á€½á€±á€œá€½á€¾á€²á€•á€¼á€±á€…á€¬á€”á€±á€¬á€€á€ºá€†á€¯á€¶á€¸á€‚á€á€”á€ºá€¸ 5 á€œá€¯á€¶á€¸</label>
      <input type="number" id="transferCode" name="transferCode" required maxlength="5" pattern="\d{5}" title="Please enter exactly 5 digits" />

      <div class="error" id="formError" aria-live="polite"></div>

      <button type="submit">Check Out</button>
    </form>
  </section>

  <!-- History Section -->
  <section id="historySection" style="display:none;">
    <h2>á€ˆá€±á€¸á€á€šá€ºá€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€»á€¬á€¸</h2>
    <div id="historyList"></div>
  </section>

  <!-- Footer -->
  <footer>
    <h3>á€†á€€á€ºá€á€½á€šá€ºá€›á€”á€º</h3>
    <p>
      Telegram Channel: <a href="https://t.me/kun_Diastore" target="_blank">ğŸ”°Kun Dia-storeğŸ”°</a><br>
      Telegram Account: <a href="https://t.me/Kun0_0" target="_blank">ğŸ©· Kun Store ğŸ©·</a>
    </p>
  </footer>

  <!-- Script -->
  <script>
    const BOT_TOKEN = '8155469967:AAHSc9o65IsCiqufEBa_ZpGSCaunjpWDOho'; // <-- Telegram Bot Token á€€á€­á€¯ á€’á€®á€™á€¾á€¬á€‘á€Šá€·á€ºá€•á€«
    const CHAT_ID = '-4825966649';     // <-- GP ID á€€á€­á€¯ á€’á€®á€™á€¾á€¬á€‘á€Šá€·á€ºá€•á€«

    const checkoutSection = document.getElementById('checkoutSection');
    const historySection = document.getElementById('historySection');
    const checkoutTab = document.getElementById('checkoutTab');
    const historyTab = document.getElementById('historyTab');
    const historyList = document.getElementById('historyList');

    checkoutTab.addEventListener('click', () => {
      checkoutSection.style.display = 'block';
      historySection.style.display = 'none';
    });

    historyTab.addEventListener('click', () => {
      checkoutSection.style.display = 'none';
      historySection.style.display = 'block';
      loadHistory();
    });

    document.getElementById('paymentMethod').addEventListener('change', function() {
      const accountInfo = document.getElementById('accountInfo');
      accountInfo.style.display = this.value ? 'block' : 'none';
    });

    document.getElementById('phoneNumber').addEventListener('click', function() {
      navigator.clipboard.writeText(this.innerText).then(() => {
        alert('á€–á€¯á€”á€ºá€¸á€”á€¶á€•á€«á€á€ºá€€á€±á€¬á€ºá€•á€®á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®!');
      });
    });

    document.getElementById('product').addEventListener('change', function() {
      const selectedOption = this.options[this.selectedIndex];
      const price = selectedOption.getAttribute('data-price') || '';
      document.getElementById('price').value = price;
    });

    document.getElementById('checkoutForm').addEventListener('submit', async function(event) {
  event.preventDefault();
  const formError = document.getElementById('formError');
  formError.textContent = '';
  
  if (!this.checkValidity()) {
    formError.textContent = 'á€€á€»á€±á€¸á€‡á€°á€¸á€•á€¼á€¯á á€¡á€¬á€¸á€œá€¯á€¶á€¸á€™á€¾á€”á€ºá€™á€¾á€”á€ºá€–á€¼á€Šá€·á€ºá€•á€«á‹';
    return;
  }
  
  if (!BOT_TOKEN || BOT_TOKEN === 'YOUR_BOT_TOKEN_HERE' || !CHAT_ID || CHAT_ID === 'YOUR_CHAT_ID_HERE') {
    alert('Telegram Bot Token á€”á€¾á€„á€·á€º Chat ID á€€á€­á€¯ á€á€±á€á€»á€¬ á€‘á€Šá€·á€ºá€•á€«á‹');
    return;
  }
  
  const entry = {
    product: document.getElementById('product').value,
    price: document.getElementById('price').value,
    gameName: document.getElementById('gameName').value,
    gameId: document.getElementById('gameId').value,
    gameServer: document.getElementById('gameServer').value,
    telegramUsername: document.getElementById('telegramUsername').value,
    paymentMethod: document.getElementById('paymentMethod').value,
    transferCode: document.getElementById('transferCode').value,
    date: new Date().toLocaleString()
  };
  
  // Save to localStorage
  const history = JSON.parse(localStorage.getItem('checkoutHistory') || '[]');
  history.push(entry);
  localStorage.setItem('checkoutHistory', JSON.stringify(history));
  
  // Telegram message (escape Markdown special chars)
  const escapeMarkdown = (text) =>
    text.replace(/([_*[\]()~`>#+-=|{}.!])/g, '\\$1');
  
  const message = `
*ğŸ“¢ New Checkout Order ğŸ“¢*

ğŸ›’ Product: ${escapeMarkdown(entry.product)}
ğŸ’° Price: ${escapeMarkdown(entry.price)} Ks

ğŸ® Game Name: ${escapeMarkdown(entry.gameName)}
ğŸ†” Game ID: ${escapeMarkdown(entry.gameId)}
ğŸŒ Server: ${escapeMarkdown(entry.gameServer)}

ğŸ’¬ Telegram: ${escapeMarkdown(entry.telegramUsername)}
ğŸ’³ Payment: ${escapeMarkdown(entry.paymentMethod)}
ğŸ”¢ Transfer Code: ${escapeMarkdown(entry.transferCode)}

ğŸ•’ Date: ${escapeMarkdown(entry.date)}
  `;
  
  try {
    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: 'POST',
      mode: 'cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        chat_id: CHAT_ID,
        text: message,
        parse_mode: 'MarkdownV2'
      })
    });
    
    const result = await response.json();
    
    if (result.ok) {
      alert('Checkout á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€™á€»á€¬á€¸á€€á€­á€¯ Telegram á€á€­á€¯á€· á€•á€­á€¯á€·á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®á‹ á€€á€»á€±á€¸á€‡á€°á€¸á€á€„á€ºá€•á€«á€á€šá€ºá‹');
      this.reset();
      document.getElementById('price').value = '';
      document.getElementById('accountInfo').style.display = 'none';
    } else {
      alert(`Telegram á€•á€­á€¯á€·á€™á€¾á€¯á€á€½á€„á€º á€•á€¼á€¿á€”á€¬á€á€€á€ºá€•á€«á€á€Šá€ºá‹\nError: ${result.description}`);
    }
  } catch (error) {
    alert('Network error á€–á€¼á€…á€ºá€”á€±á€•á€«á€á€Šá€ºá‹ á€•á€¼á€”á€ºá€œá€Šá€ºá€…á€™á€ºá€¸á€€á€¼á€Šá€·á€ºá€•á€«á‹');
    console.error('Telegram sendMessage error:', error);
  }
});

    function loadHistory() {
      const history = JSON.parse(localStorage.getItem('checkoutHistory') || '[]');
      if (history.length === 0) {
        historyList.innerHTML = '<p>á€™á€Šá€ºá€á€Šá€·á€ºá€á€šá€ºá€šá€°á€™á€¾á€¯á€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€¾ á€™á€›á€¾á€­á€á€±á€¸á€•á€«á‹</p>';
        return;
      }
      historyList.innerHTML = '';
      history.slice().reverse().forEach((entry, index) => {
        const div = document.createElement('div');
        div.className = 'history-item';
        div.innerHTML = `
          <strong>${entry.product} - ${entry.price} Ks</strong><br>
          Game: ${entry.gameName} (ID: ${entry.gameId})<br>
          Server: ${entry.gameServer}<br>
          Telegram: ${entry.telegramUsername}<br>
          Payment: ${entry.paymentMethod}<br>
          Transfer Code: ${entry.transferCode}<br>
          Date: ${entry.date}
        `;
        historyList.appendChild(div);
      });
    }
  </script>

</body>
</html>
