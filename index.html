<!DOCTYPE html>
<html lang="my">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MLBB Shop</title>
  <style>
    :root {
      --pink: #ff69b4;
      --blue: #00bfff;
      --light-bg: #fdfdfd;
      --card-bg: #fff;
      --text-color: #333;
      --border-color: #eee;
      --shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light-bg);
      color: var(--text-color);
      margin: 0;
      padding: 0;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background: linear-gradient(90deg, var(--pink), var(--blue));
      color: white;
      box-shadow: var(--shadow);
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    header button {
      margin-left: 0.5rem;
      padding: 0.5rem 1rem;
      border: none;
      background-color: white;
      color: var(--pink);
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    header button:hover {
      background-color: var(--blue);
      color: white;
    }
    


    section {
      padding: 1rem;
      max-width: 600px;
      margin: 1rem auto;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--shadow);
    }

    h2 {
      color: var(--pink);
      border-bottom: 2px solid var(--blue);
      padding-bottom: 0.5rem;
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
      color: var(--blue);
    }

    input, select {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.25rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      box-sizing: border-box;
      transition: border 0.3s;
    }

    input:focus, select:focus {
      border-color: var(--pink);
      outline: none;
    }

    button[type="submit"] {
      margin-top: 1.5rem;
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      cursor: pointer;
      background: linear-gradient(90deg, var(--pink), var(--blue));
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      transition: 0.3s;
      width: 100%;
    }

    button[type="submit"]:hover {
      opacity: 0.9;
    }

    .copy-box {
      border: 1px dashed var(--pink);
      padding: 0.75rem;
      margin-top: 0.25rem;
      background-color: #fff0f8;
      cursor: pointer;
      border-radius: 8px;
      user-select: none;
      transition: background-color 0.2s;
    }

    .copy-box:hover {
      background-color: #ffe0ef;
    }

    .history-item {
      border-bottom: 1px solid var(--border-color);
      padding: 0.75rem 0;
    }

    footer {
      margin-top: 2rem;
      padding: 1rem;
      background: linear-gradient(90deg, var(--blue), var(--pink));
      color: white;
      text-align: center;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    footer a {
      color: white;
      text-decoration: underline;
    }

    .error {
      color: red;
      margin-top: 0.5rem;
    }
    
        .box {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: linear-gradient(90deg, var(--pink), var(--blue));
  color: white;
  box-shadow: var(--shadow);
}
    
    
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <h1>MLBB Shop</h1>
    <nav>
      <button id="checkoutTab">ဝယ်ရန်</button>
      <button id="historyTab">မှတ်တမ်း</button>
    </nav>
  </header>

  <!-- Checkout Section -->
  <section id="checkoutSection">
    <h2>ဈေးဝယ်မည်</h2>
    
    
    <label for="product" 
      <div class="box" id="note">
        <div>
          <h4><b><i><u>Note - သတိပြုရန်</u></i</b></h4>

          <h3>မနက်10 နာရီမှ ည12 နာရီအတွင်းသာ အော်ဒါတင်‌ပေးပါ </h3>
          <ul type="square">
            <li>2x Dia💎 သည် တစ်မျိုးကိုတစ်ခါသာဝယ်ယူနိုင်ပါသည် Seller များဆီမှာဝယ်ယူဖူးပါကထပ်မဝယ်ပါနှင့် </li>
            <li>ဂိမ်း ID နဲ့ Sever ကိုမှန်အောင်ထည့်ပေးပါ </li>
            <li>ဂိမ်းအကောင့်နာမည်က ဂိမ်း id နဲ့တိုက်စစ်ဖို့ပါအကြမ်းဖျင်းပဲရေးလဲရပါတယ်</li>
      
      
      
          </ul>
        </div>
     </div></label>
    <label for="product">Diamond/WeeklyPass/Twilight  ဝယ်ရန်ရွေးချယ်ပါ</label>
    <select id="product" name="product" required>
      <option value="">ဝယ်မည့်ပမာဏ</option>
      <option value="Weekly Pass" data-price="6000">Weekly Pass - 6000 Ks</option>
      
      
          <!-- ဈေးနှုန်းထပ်ထည့်ရမယ် -->
      
      
     <option value="  TwilightPass " data-price="33000"> Twilight Pass -  33000Ks</option>
<option value="2xDia💎50 " data-price="3250">2x Dia 💎 50 - 3250Ks</option>
<option value="2xDia💎150" data-price="9550"> 2x Dia 💎 150 - 9550Ks</option>
<option value="2xDia💎250" data-price="15500"> 2x Dia 💎 250 -  15500Ks</option>
<option value="2xDia💎500" data-price=" 32500"> 2x Dia 💎 500 -  32500Ks</option>


<option value=" 11💎 " data-price=" 950"> 💎11 -  950Ks</option>
<option value="  22💎 " data-price="1900">💎22 -  1900Ks</option>
<option value="  33💎 " data-price="2800 "> 💎33 - 2800Ks</option>
<option value="  44💎" data-price="3700 ">💎44 -  3700Ks</option>
<option value="  56💎" data-price=" 4500">💎56 -  4500Ks</option>
<option value="  86💎" data-price=" 4950"> 💎86 -  4950Ks</option>
<option value=" 112💎 " data-price=" 8500">💎112 -  8500Ks</option>
<option value="172💎  " data-price=" 9800">💎172 -  9800Ks</option>
<option value=" 257💎 " data-price=" 14200">💎257 -  14200Ks</option>
<option value="  343💎" data-price=" 19200">💎343 -  19200Ks</option>
<option value="  429💎 " data-price="24000 "> 💎429 - 24000 Ks</option>
<option value=" 514💎  " data-price=" 29000">💎514 -  29000Ks</option>
<option value="  600💎 " data-price=" 33800">💎600 - 33800 Ks</option>
<option value=" 706💎  " data-price=" 38800"> 💎706 - 38800Ks</option>
<option value="  878💎 " data-price=" 48350"> 💎878 - 48350Ks</option>
<option value=" 963💎  " data-price=" 53000"> 💎963 - 53000Ks</option>
<option value="  1049💎 " data-price=" 58550">💎1049 - 58550Ks</option>
<option value="  2195💎 " data-price=" 119000"> 💎2195 -  119000Ks</option>
<option value=" 3688💎  " data-price=" 196000">💎3688 -  196000Ks</option>
<option value=" 5532💎  " data-price=" 295000"> 💎5532 -  295000Ks</option>
<option value=" 9288💎  " data-price=" 495000"> 💎9288 -  495000Ks</option>
      
      
      <!-- ဈေးနှုန်းထပ်ထည့်ရမယ် -->
      
      
      
    </select>

    <label for="price">ဈေးနှုန်း</label>
    <input type="text" id="price" name="price" readonly />

    <!-- Checkout Form -->
    <form id="checkoutForm" novalidate>
      <label for="gameName">Game Account Name</label>
      <input type="text" id="gameName" name="gameName" required />

      <label for="gameId">Game ID</label>
      <input type="number" id="gameId" name="gameId" required pattern="\d+" title="Game ID must be numeric" />

      <label for="gameServer">Server Id</label>
      <input type="number" id="gameServer" name="gameServer" required />

      <label for="telegramUsername">
            
      (ဝယ်ယူမှုအောင်မြင်ကြောင်းအသိပေးနိုင်ရန််။)
</br>
 Telegram Username ( @ ) ပါထည့်ရေးပါ </br> <small>username မရှိပါက ဖုန်းနံပါတ်ကို@Numခံပြီးရေးပေးပါ </small>
      </br> <small>ဥပမာ @Num09××××××××× </small>
      
      

      
      </label>
      <input type="text" id="telegramUsername" name="telegramUsername" required pattern="^@[a-zA-Z0-9_]{5,}$" title="Telegram username must start with @ and be at least 6 characters" />

      <label for="paymentMethod">ငွေပေးချေရန်နည်းလမ်း </label>
      <select id="paymentMethod" name="paymentMethod" required>
        <option value="">ငွေပေးချေရန်နည်းလမ်းရွေးပါ</option>
        <option value="KBZ">KBZ Pay</option>
        <option value="WavePay">Wave Pay</option>
        <option value="AYA">AYA Pay</option>
      </select>

      <!-- Account Info Display -->
      <div id="accountInfo" style="display:none; margin-top: 1rem;">
  <label>Account Name</label>
  <div class="copy-box" id="accountName">Your Shop Account</div>
  
  <label>Account Number <small>(Copy ယူရန်ဖုန်းနံပါတ်ကိုနှိပ်ပါ)</small></label>
  <div class="copy-box" id="phoneNumber">09XXXXXXXXX</div>
</div>

      <label for="transferCode">ငွေလွှဲပြီးပြေစာနောက်ဆုံးဂဏန်း 5 လုံးရိုက်ထည့်ပါ</label>
      <input type="text" id="transferCode" name="transferCode" required maxlength="5" pattern="\d{5}" title="Please enter exactly 5 digits" />

      <div class="error" id="formError" aria-live="polite"></div>

      <button type="submit">Order တင်မည်</button>
    </form>
  </section>

  <!-- History Section -->
  <section id="historySection" style="display:none;">
    <h2>ဈေးဝယ်မှတ်တမ်းများ</h2>
    <div id="historyList"></div>
  </section>

  <!-- Footer -->
  <footer>
    <h3>ဆက်သွယ်ရန်</h3>
    <p>
      Telegram Channel: <a href="https://t.me/kun_Diastore" target="_blank">🔰Kun Dia-store🔰</a> <br><br>
      Telegram Account: <a href="https://t.me/Kun0_0" target="_blank">🩷 Kun Store 🩷</a>
    </p>
  </footer>

  <!-- Script -->
  <script>
    const BOT_TOKEN = '8155469967:AAHSc9o65IsCiqufEBa_ZpGSCaunjpWDOho'; // <-- Telegram Bot Token ကို ဒီမှာထည့်ပါ
    const CHAT_ID = '-4825966649';     // <-- GP ID ကို ဒီမှာထည့်ပါ

    const checkoutSection = document.getElementById('checkoutSection');
    const historySection = document.getElementById('historySection');
    const checkoutTab = document.getElementById('checkoutTab');
    const historyTab = document.getElementById('historyTab');
    const historyList = document.getElementById('historyList');

    checkoutTab.addEventListener('click', () => {
      checkoutSection.style.display = 'block';
      historySection.style.display = 'none';
    });

    historyTab.addEventListener('click', () => {
      checkoutSection.style.display = 'none';
      historySection.style.display = 'block';
      loadHistory();
    });

    document.getElementById('paymentMethod').addEventListener('change', function() {
  const accountInfo = document.getElementById('accountInfo');
  const accountName = document.getElementById('accountName');
  const phoneNumber = document.getElementById('phoneNumber');
  
  switch (this.value) {
    case 'KBZ':
      accountName.innerText = 'Aung Thet Paing Phyo';
      phoneNumber.innerText = '09677545045';
      accountInfo.style.display = 'block';
      break;
    case 'WavePay':
      accountName.innerText = 'Zar Ni Aung';
      phoneNumber.innerText = '09677545045';
      accountInfo.style.display = 'block';
      break;
    case 'AYA':
      accountName.innerText = 'Aung Thet Paing Phyo';
      phoneNumber.innerText = '09677545045';
      accountInfo.style.display = 'block';
      break;
    default:
      accountInfo.style.display = 'none';
      break;
  }
});

    document.getElementById('phoneNumber').addEventListener('click', function() {
      navigator.clipboard.writeText(this.innerText).then(() => {
        alert('ဖုန်းနံပါတ်ကော်ပီပြီးပါပြီ!');
      });
    });

    document.getElementById('product').addEventListener('change', function() {
      const selectedOption = this.options[this.selectedIndex];
      const price = selectedOption.getAttribute('data-price') || '';
      document.getElementById('price').value = price;
    });

    document.getElementById('checkoutForm').addEventListener('submit', async function(event) {
  event.preventDefault();
  const formError = document.getElementById('formError');
  formError.textContent = '';
  
  if (!this.checkValidity()) {
    formError.textContent = 'ကျေးဇူးပြု၍ အားလုံးမှန်မှန်ဖြည့်ပါ။';
    return;
  }
  
  if (!BOT_TOKEN || BOT_TOKEN === 'YOUR_BOT_TOKEN_HERE' || !CHAT_ID || CHAT_ID === 'YOUR_CHAT_ID_HERE') {
    alert('Telegram Bot Token နှင့် Chat ID ကို သေချာ ထည့်ပါ။');
    return;
  }
  
  const entry = {
    product: document.getElementById('product').value,
    price: document.getElementById('price').value,
    gameName: document.getElementById('gameName').value,
    gameId: document.getElementById('gameId').value,
    gameServer: document.getElementById('gameServer').value,
    telegramUsername: document.getElementById('telegramUsername').value,
    paymentMethod: document.getElementById('paymentMethod').value,
    transferCode: document.getElementById('transferCode').value,
    date: new Date().toLocaleString()
  };
  
  // Save to localStorage
  const history = JSON.parse(localStorage.getItem('checkoutHistory') || '[]');
  history.push(entry);
  localStorage.setItem('checkoutHistory', JSON.stringify(history));
  
  // Telegram message (escape Markdown special chars)
  const escapeMarkdown = (text) =>
    text.replace(/([_*[\]()~`>#+-=|{}.!])/g, '\\$1');
  
  const message = `
*📢 New Checkout Order 📢*

🛒 Product: ${escapeMarkdown(entry.product)}
💰 Price: ${escapeMarkdown(entry.price)} Ks

🎮 Game Name: ${escapeMarkdown(entry.gameName)}
🆔 Game ID: ${escapeMarkdown(entry.gameId)}
🌐 Server: ${escapeMarkdown(entry.gameServer)}

💬 Telegram: ${escapeMarkdown(entry.telegramUsername)}
💳 Payment: ${escapeMarkdown(entry.paymentMethod)}
🔢 Transfer Code: ${escapeMarkdown(entry.transferCode)}

🕒 Date: ${escapeMarkdown(entry.date)}
  `;
  
  try {
    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: 'POST',
      mode: 'cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        chat_id: CHAT_ID,
        text: message,
        parse_mode: 'MarkdownV2'
      })
    });
    
    const result = await response.json();
    
    if (result.ok) {
      alert('အော်ဒါတင်ပြိးပါပြီ 3မိနစ်အတွင်းပြန်လည်အကြောင်းကြားပေးပါမယ်။  ');
      this.reset();
      document.getElementById('price').value = '';
      document.getElementById('accountInfo').style.display = 'none';
    } else {
      alert(`အော်ဒါတင်လို့မရပါ။\nError: ${result.description}`);
    }
  } catch (error) {
    alert('Network error ဖြစ်နေပါသည်။ ပြန်လည်စမ်းကြည့်ပါ။');
    console.error('Telegram sendMessage error:', error);
  }
});

    function loadHistory() {
      const history = JSON.parse(localStorage.getItem('checkoutHistory') || '[]');
      if (history.length === 0) {
        historyList.innerHTML = '<p>မည်သည့်ဝယ်ယူမှုမှတ်တမ်းမှ မရှိသေးပါ။</p>';
        return;
      }
      historyList.innerHTML = '';
      history.slice().reverse().forEach((entry, index) => {
        const div = document.createElement('div');
        div.className = 'history-item';
        div.innerHTML = `
          <strong>${entry.product} - ${entry.price} Ks</strong><br>
          Game: ${entry.gameName} (ID: ${entry.gameId})<br>
          Server: ${entry.gameServer}<br>
          Telegram: ${entry.telegramUsername}<br>
          Payment: ${entry.paymentMethod}<br>
          Transfer Code: ${entry.transferCode}<br>
          Date: ${entry.date}
        `;
        historyList.appendChild(div);
      });
    }
  </script>

</body>
</html>
